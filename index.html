<!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="apple-itunes-app" content="app-id=6754125972">
      <title>Pathways - Open App</title>
      <style>
          body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              margin: 0;
              padding: 20px;
              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
              min-height: 100vh;
              display: flex;
              align-items: center;
              justify-content: center;
              text-align: center;
              color: white;
          }
          .container {
              max-width: 400px;
              padding: 40px;
              background: rgba(255, 255, 255, 0.1);
              border-radius: 20px;
              backdrop-filter: blur(10px);
          }
          .logo {
              font-size: 48px;
              margin-bottom: 20px;
          }
          h1 {
              margin: 0 0 20px 0;
              font-size: 32px;
          }
          p {
              margin: 0 0 30px 0;
              font-size: 18px;
              opacity: 0.9;
          }
          .btn {
              display: inline-block;
              padding: 15px 30px;
              background: rgba(255, 255, 255, 0.2);
              color: white;
              text-decoration: none;
              border-radius: 10px;
              font-size: 16px;
              font-weight: 600;
              margin: 10px;
              transition: all 0.3s ease;
              border: 2px solid rgba(255, 255, 255, 0.3);
          }
          .btn:hover {
              background: rgba(255, 255, 255, 0.3);
              transform: translateY(-2px);
          }
          .btn-primary {
              background: #4CAF50;
              border-color: #4CAF50;
          }
          .status {
              margin-top: 20px;
              font-size: 14px;
              opacity: 0.7;
          }
          .hidden {
              display: none;
          }
      </style>
  </head>
  <body>
      <div class="container">
          <div class="logo">ðŸ§©</div>
          <h1>Pathways</h1>
          <p>Connect the dots. Solve the puzzle.</p>

          <div id="loading" class="status">
              Checking if Pathways is installed...
          </div>

          <div id="app-installed" class="hidden">
              <a href="pathways://open" class="btn btn-primary" id="open-app">Open Pathways</a>
              <div class="status">Tap above to open the app</div>
          </div>

          <div id="app-not-installed" class="hidden">
              <p>Download Pathways to start solving puzzles!</p>
              <a href="https://apps.apple.com/us/app/pathways-spatial-logic-puzzle/id6754125972" class="btn" target="_blank">Download on App Store</a>
              <a href="https://play.google.com/store/apps/details?id=com.willyarbuckle.pathways" class="btn" target="_blank">Get on Google Play</a>
          </div>
      </div>

      <script>
          // Smart App Banner approach
          function detectAndOpenApp() {
              const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
              const isAndroid = /Android/.test(navigator.userAgent);

              if (isIOS) {
                  // iOS Smart App Banner will handle app detection automatically
                  // Just redirect to App Store - banner will show "Open" if app installed
                  window.location.href = 'https://apps.apple.com/us/app/pathways-spatial-logic-puzzle/id6754125972';

              } else if (isAndroid) {
                  // Android intent with automatic fallback
                  const intentURL = 'intent://open#Intent;scheme=pathways;package=com.willyarbuckle.pathways;S.browser_fallback_url=https://play.google.com/
  store/apps/details?id=com.willyarbuckle.pathways;end';
                  window.location.href = intentURL;

              } else {
                  // Desktop - redirect to App Store
                  window.location.href = 'https://apps.apple.com/us/app/pathways-spatial-logic-puzzle/id6754125972';
              }
          }

          // Run detection when page loads
          window.addEventListener('load', detectAndOpenApp);

          // Handle visibility change (for iOS app detection)
          let hidden = false;
          document.addEventListener('visibilitychange', () => {
              if (document.hidden && !hidden) {
                  hidden = true;
                  // App likely opened successfully
                  document.getElementById('app-installed').classList.remove('hidden');
                  document.getElementById('app-not-installed').classList.add('hidden');
              }
          });
      </script>
  </body>
  </html>
